# 位运算

## 1.原码、反码和补码

* **原码**就是最高位是符号位的，用二进制表示的数(0代表正数，1代表负数)。

* **反码**的话：正数的原码和反码是一样的，负数的反码是原码的符号位不变，其它位取反。

* **补码**的话：正数的原码和补码也是一样的，负数的补码是反码＋1。

总结的话：正数的三个码是一样的，只需要记一下负数的即可。

## 2.按位非操作

~这个符号把一个数的补码的0和1全部取反。

## 3.按位与操作

&这个符号会把它左右两个数的补码比较，其中对应位都为1时才会取1（在相应位置上）。

## 4.按位或操作

|这个符号会把它左右两个数的补码比较，只要有一个1则在相应位置上取1.

## 5.按位异或操作

^这个符号会把它左右两个数的补码相比较，两个对应位不同时才为1。

## 6.按位左移操作

<< 这个符号将符号左边的数的二进制形式里的所有1都向左移，移动的位数就是这个符号右边的数字。>>这个差不多。

## 7.利用位运算快速计算

通过 `<<`，`>>` 快速计算2的倍数问题。

```python
n << 1 -> 计算 n*2
n >> 1 -> 计算 n/2，负奇数的运算不可用
n << m -> 计算 n*(2^m)，即乘以 2 的 m 次方
n >> m -> 计算 n/(2^m)，即除以 2 的 m 次方
1 << n -> 2^n
```

通过 `^` 快速交换两个整数。

```python
a ^= b
b ^= a
a ^= b
```

通过 `a & (-a)` 快速获取`a`的最后为 1 位置的整数。

```python
00 00 01 01 -> 5
&
11 11 10 11 -> -5
---
00 00 00 01 -> 1

00 00 11 10 -> 14
&
11 11 00 10 -> -14
---
00 00 00 10 -> 2
```

## 8.利用位运算实现整数集合

元素与集合的操作：

```python
a | (1<<i)  -> 把 i 插入到集合中
a & ~(1<<i) -> 把 i 从集合中删除
a & (1<<i)  -> 判断 i 是否属于该集合（零不属于，非零属于）
```

Python中`bin`一个负数（十进制表示），输出的是它的原码的二进制表示加上个负号，Python中的整型是补码形式存储的。

## 练习题

leetcode 习题 136. 只出现一次的数字

给定一个**非空**整数数组，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。

尝试使用位运算解决此题。

5 ^ 0 =5
也就是0和任何数异或的结果是这个任何数

3 ^ 3 = 0
任何相同的数异或的结果是0

又由于异或满足交换结合律，整合重复的数都有2个，所以可以抵消掉

```python
 a = 0
 for i in nums:
 a ^= i
 return a
```



